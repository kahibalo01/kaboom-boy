<!DOCTYPE html>
<html>
	<head>
		<title>ImageLoader Test</title>
		<style>
			#container{			
				text-align: center;
			}

			canvas{
				border: 1px solid black;
			}
		</style>
		<script type = "text/javascript" src = "../js/Defines.js"></script>
		<script type = "text/javascript" src = "../js/GameStateManager.js"></script>
		<script type = "text/javascript" src = "../js/GameEngine.js"></script>
		<script>
			window.onload = (function(GameEngine, Defines){
				return function(){
					var ge = new GameEngine(document.getElementById("container"), Defines["FPS"], Defines["screen_width"], 
						Defines["screen_height"], Defines["screen_scale"]);
					var gsm = ge.getGameStateManager();

					gsm.addState("test-state", {
						x: 100,
						y: 100,
						dx: 1,

						init: function(){

						},

						update: function(){
							console.log("updating");
							this.x += this.dx;

							if(this.x > 400){
								this.dx = -1;
							}else
							if(this.x < 100){
								this.dx = 1;
							}

						},

						render: function(ctx){
							ctx.fillRect(this.x, this.y, 20, 20);
						},
					});

					gsm.loadState("test-state");

					ge.run();
				}

			})(KaboomBoy.GameEngine, KaboomBoy.Defines);
		</script>
	</head>
	<body>
		<div id = "container"></div>
	</body>
</html>