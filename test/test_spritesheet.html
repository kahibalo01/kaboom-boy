<!-- 
	NOTE: TEST PAGE

	This page is meant to test mainly the `Spritesheet` class. but also to a lesser extent the following classes:
		- GameEngine
		- GameStateManager
		- ImageLoader
-->
<!DOCTYPE html>
<html>
	<head>
		<title>Spritesheet Test</title>
		<link rel = "stylesheet" href = "../css/page_style.css"/>
		<script type = "text/javascript" src = "../js/Defines.js"></script>
		<script type = "text/javascript" src = "../js/GameStateManager.js"></script>
		<script type = "text/javascript" src = "../js/GameEngine.js"></script>
		<script type = "text/javascript" src = "../js/ResourceLoader.js"></script>
		<script type = "text/javascript" src = "../js/Spritesheet.js"></script>
		<script>
			window.onload = function(){
				var ge = new KaboomBoy.GameEngine(document.getElementById("game-container"), 30, 640, 480, 2);
				var gsm = ge.getGameStateManager();

				var ss;

				gsm.addState("test-state", {
					i: 0,
					t: 0,

					init: function(){
					},

					update: function(){
						this.t++;
						if(this.t === 40){

							this.i++;
							if(this.i === 8){
								this.i = 0;
							}

							this.t = 0;
						}
					},

					render: function(ctx){
						ss.drawSpriteToContext(ctx, this.i, 140, 100);
					},
				});

				var il = new KaboomBoy.ImageLoader();
				il.queueLoadImage("spritesheet test", "../assets/img/test/Spritesheet Test.png");
				il.loadAllImages(function(path){
					console.log("Loaded " + path);
				}, function(){
					ss = new KaboomBoy.Spritesheet(il.getImage("spritesheet test"), 40, 40);

					gsm.loadState("test-state");
					ge.run();
				});
				
			}
			
		</script>
	</head>
	<body>
		<div id = "game-container"></div>
		<div id = "description">
			<h2>Spritesheet Test</h2>
			<b>Expected Result: </b>Roman numerals I to VII will flash in different colors. <br>
			(VII is also there, but in color white, so it is not visible)<br>
		</div>
	</body>
</html>